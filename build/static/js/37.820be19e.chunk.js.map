{"version":3,"sources":["assets/img/create-account-office.jpeg","assets/img/create-account-office-dark.jpeg","pages/SignUp.js","hooks/useLoginSubmit.js"],"names":["SignUp","t","useTranslation","onSubmit","register","handleSubmit","errors","loading","useLoginSubmit","_jsx","className","children","_jsxs","src","ImageLight","alt","ImageDark","LabelArea","label","InputArea","name","type","placeholder","Error","errorName","email","phone","password","SelectRole","role","Label","check","Input","Button","disabled","to","block","ImFacebook","ImGoogle","Link","setLoading","useState","dispatch","useContext","AdminContext","history","useHistory","location","useLocation","formState","useForm","_ref","verifyEmail","pathname","AdminServices","loginAdmin","then","res","token","console","log","Cookies","set","JSON","stringify","expires","notifySuccess","payload","localStorage","setItem","replace","catch","err","error","notifyError","response","data","message","registerAdmin","forgetPassword"],"mappings":"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","file":"static/js/37.820be19e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/create-account-office.080280cb.jpeg\";","export default __webpack_public_path__ + \"static/media/create-account-office-dark.080280cb.jpeg\";","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Input, Label, Button } from \"@windmill/react-ui\";\nimport { ImFacebook, ImGoogle } from \"react-icons/im\";\nimport { useTranslation } from \"react-i18next\";\nimport Error from \"components/form/Error\";\nimport InputArea from \"components/form/InputArea\";\nimport LabelArea from \"components/form/LabelArea\";\nimport SelectRole from \"components/form/SelectRole\";\nimport useLoginSubmit from \"hooks/useLoginSubmit\";\nimport ImageLight from \"assets/img/create-account-office.jpeg\";\nimport ImageDark from \"assets/img/create-account-office-dark.jpeg\";\n\nconst SignUp = () => {\n  const { t } = useTranslation()\n  const { onSubmit, register, handleSubmit, errors, loading } = useLoginSubmit();\n\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-md dark:bg-gray-800\">\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n          <div className=\"h-32 md:h-auto md:w-1/2\">\n            <img\n              aria-hidden=\"true\"\n              className=\"object-cover w-full h-full dark:hidden\"\n              src={ImageLight}\n              alt=\"Office\"\n            />\n            <img\n              aria-hidden=\"true\"\n              className=\"hidden object-cover w-full h-full dark:block\"\n              src={ImageDark}\n              alt=\"Office\"\n            />\n          </div>\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n            <div className=\"w-full\">\n              <h1 className=\"mb-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">\n                {t(\"CreateAccount\")}\n              </h1>\n              <form onSubmit={handleSubmit(onSubmit)}>\n                <LabelArea label=\"Name\" />\n                <InputArea\n                  register={register}\n                  label=\"Name\"\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"Admin\"\n                />\n                <Error errorName={errors.name} />\n                <LabelArea label=\"Email\" />\n                <InputArea\n                  register={register}\n                  label=\"Email\"\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"john@doe.com\"\n                />\n                <Error errorName={errors.email} />\n\n                <LabelArea label=\"Phone\" />\n                <InputArea\n                  register={register}\n                  label=\"Phone\"\n                  name=\"phone\"\n                  type=\"tel\"\n                  placeholder=\"0123456789\"\n                />\n                <Error errorName={errors.phone} />\n\n                <LabelArea label=\"Password\" />\n                <InputArea\n                  register={register}\n                  label=\"Password\"\n                  name=\"password\"\n                  type=\"password\"\n                  placeholder=\"***************\"\n                />\n                <Error errorName={errors.password} />\n\n                <LabelArea label=\"Staff Role\" />\n                <div className=\"col-span-8 sm:col-span-4\">\n                  <SelectRole register={register} label=\"Role\" name=\"role\" />\n                  <Error errorName={errors.role} />\n                </div>\n\n                <Label className=\"mt-6\" check>\n                  <Input type=\"checkbox\" />\n                  <span className=\"ml-2\">\n                    {t(\"Iagree\")} <span className=\"underline\">{t(\"privacyPolicy\")}</span>\n                  </span>\n                </Label>\n\n                <Button\n                  disabled={loading}\n                  type=\"submit\"\n                  className=\"mt-4 h-12 w-full\"\n                  to=\"/dashboard\"\n                  block\n                >\n                  {t(\"CreateAccountTitle\")}\n                </Button>\n              </form>\n\n              <hr className=\"my-10\" />\n\n              <button\n                disabled\n                className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2 md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-blue-600 h-11 md:h-12 w-full mr-2\"\n              >\n                <ImFacebook className=\"w-4 h-4 mr-2\" /> <span className=\"ml-2\"> {t(\"LoginWithFacebook\")} </span>\n              </button>\n              <button\n                disabled\n                className=\"text-sm inline-flex items-center cursor-pointer transition ease-in-out duration-300 font-semibold font-serif text-center justify-center rounded-md focus:outline-none text-gray-700 bg-gray-100 shadow-sm my-2  md:px-2 lg:px-3 py-4 md:py-3.5 lg:py-4 hover:text-white hover:bg-red-500 h-11 md:h-12 w-full\"\n              >\n                <ImGoogle className=\"w-4 h-4 mr-2\" /> <span className=\"ml-2\">{t(\"LoginWithGoogle\")}</span>\n              </button>\n\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-green-500 dark:text-green-400 hover:underline\"\n                  to=\"/login\"\n                >\n                  {t(\"AlreadyAccount\")}\n                </Link>\n              </p>\n            </div>\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SignUp;\n","// import Cookies from 'js-cookie';\n// import { useContext, useState } from 'react';\n// import { useForm } from 'react-hook-form';\n// import { useHistory, useLocation } from 'react-router-dom';\n// import { AdminContext } from 'context/AdminContext';\n// import AdminServices from 'services/AdminServices';\n// import { notifyError, notifySuccess } from 'utils/toast';\n\n// const useLoginSubmit = () => {\n//   const [loading, setLoading] = useState(false);\n//   const { dispatch } = useContext(AdminContext);\n//   const history = useHistory();\n//   const location = useLocation();\n//   const {\n//     register,\n//     handleSubmit,\n//     formState: { errors },\n//   } = useForm();\n\n//   const onSubmit = ({ name, email, verifyEmail, password, role }) => {\n//     setLoading(true);\n//     const cookieTimeOut = 0.5;\n\n//     if (location.pathname === '/login') {\n//       AdminServices.loginAdmin({ email, password })\n//         .then((res) => {\n//           if (res) {\n//             console.log('Login response:', res);\n//             Cookies.set('adminInfo', JSON.stringify(res), {\n//               expires: cookieTimeOut,\n//             });\n//           }\n//         })\n//         .catch((err) => {\n//           console.error('Login error:', err);\n//           notifyError(err ? err.response.data.message : err.message);\n//           setLoading(false);\n//         });\n//       setLoading(false);\n//       notifySuccess('Login Success!');\n//       dispatch({ type: 'USER_LOGIN', payload: { email: email } });\n//       localStorage.setItem(\"email\", email)\n//       history.replace('/');\n//     }\n\n//     if (location.pathname === '/signup') {\n//       AdminServices.registerAdmin({ name, email, password, role })\n//         .then((res) => {\n//           if (res) {\n//             setLoading(false);\n//             notifySuccess('Register Success!');\n//             dispatch({ type: 'USER_LOGIN', payload: res });\n//             Cookies.set('adminInfo', JSON.stringify(res), {\n//               expires: cookieTimeOut,\n//             });\n//             history.replace('/');\n//           }\n//         })\n//         .catch((err) => {\n//           notifyError(err ? err.response.data.message : err.message);\n//           setLoading(false);\n//         });\n//     }\n\n//     if (location.pathname === '/forgot-password') {\n//       AdminServices.forgetPassword({ verifyEmail })\n//         .then((res) => {\n//           setLoading(false);\n//           notifySuccess(res.message);\n//         })\n//         .catch((err) => {\n//           setLoading(false);\n//           notifyError(err ? err.response.data.message : err.message);\n//         });\n//     }\n//   };\n//   return {\n//     onSubmit,\n//     register,\n//     handleSubmit,\n//     errors,\n//     loading,\n//   };\n// };\n\n// export default useLoginSubmit;\n\n\n\n// just trying to make user stay at login when its correct from tokens \nimport Cookies from 'js-cookie';\nimport { useContext, useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { AdminContext } from 'context/AdminContext';\nimport AdminServices from 'services/AdminServices';\nimport { notifyError, notifySuccess } from 'utils/toast';\n\nconst useLoginSubmit = () => {\n  const [loading, setLoading] = useState(false);\n  const { dispatch } = useContext(AdminContext);\n  const history = useHistory();\n  const location = useLocation();\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = ({ name, email, phone, verifyEmail, password, role }) => {\n    setLoading(true);\n    const cookieTimeOut = 0.5;\n\n    if (location.pathname === '/login') {\n      AdminServices.loginAdmin({ email, password })\n        .then((res) => {\n          if (res && res.token) {\n            console.log('Login response:', res);\n            Cookies.set('adminInfo', JSON.stringify(res), {\n              expires: cookieTimeOut,\n            });\n            setLoading(false);\n            notifySuccess('Login Success!');\n            // dispatch({ type: 'USER_LOGIN', payload: { email: email } });\n            dispatch({ type: 'USER_LOGIN', payload: { token: res.token } });\n            localStorage.setItem(\"email\", email)\n            history.replace('/');\n          }\n        })\n        .catch((err) => {\n          console.error('Login error:', err);\n          notifyError(err ? err.response.data.message : err.message);\n          setLoading(false);\n        });\n    }\n\n    if (location.pathname === '/signup') {\n      AdminServices.registerAdmin({ name, email, phone, password, role })\n        .then((res) => {\n          if (res) {\n            setLoading(false);\n            notifySuccess('Register Success!');\n            dispatch({ type: 'USER_LOGIN', payload: res });\n            Cookies.set('adminInfo', JSON.stringify(res), {\n              expires: cookieTimeOut,\n            });\n            history.replace('/');\n          }\n        })\n        .catch((err) => {\n          notifyError(err ? err.response.data.message : err.message);\n          setLoading(false);\n        });\n    }\n    // Added by: Govinda 25/4/2024\n    if (location.pathname === '/forgot-password') {\n      console.log('Forgot Password form submitted:', verifyEmail);\n\n      AdminServices.forgetPassword({ verifyEmail })\n        .then((res) => {\n          setLoading(false);\n          console.log('Password reset response:', res);\n          notifySuccess(res.message);\n        })\n        .catch((err) => {\n          setLoading(false);\n          console.error('Password reset error:', err);\n          notifyError(err ? err.response.data.message : err.message);\n        });\n    }\n  };\n  return {\n    onSubmit,\n    register,\n    handleSubmit,\n    errors,\n    loading,\n  };\n};\n\nexport default useLoginSubmit;\n"],"sourceRoot":""}